
(window.AcroForm=function(g){var k=window.AcroForm;k.scale=function(o){return(o*(l.internal.scaleFactor/1))};k.antiScale=function(o){return((1/l.internal.scaleFactor)*o)};var l={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:false,internal:null};jsPDF.API.acroformPlugin=l;var b=function(){for(var o in this.acroformPlugin.acroFormDictionaryRoot.Fields){var p=this.acroformPlugin.acroFormDictionaryRoot.Fields[o];if(p.hasAnnotation){n.call(this,p)}}};var a=function(){if(this.acroformPlugin.acroFormDictionaryRoot){throw new Error("Exception while creating AcroformDictionary")}this.acroformPlugin.acroFormDictionaryRoot=new k.AcroFormDictionary();this.acroformPlugin.internal=this.internal;this.acroformPlugin.acroFormDictionaryRoot._eventID=this.internal.events.subscribe("postPutResources",j);this.internal.events.subscribe("buildDocument",b);this.internal.events.subscribe("putCatalog",h);this.internal.events.subscribe("postPutPages",d)};var n=function(p){var o={type:"reference",object:p};jsPDF.API.annotationPlugin.annotations[this.internal.getPageInfo(p.page).pageNumber].push(o)};var m=function(o){if(this.acroformPlugin.printedOut){this.acroformPlugin.printedOut=false;this.acroformPlugin.acroFormDictionaryRoot=null}if(!this.acroformPlugin.acroFormDictionaryRoot){a.call(this)}this.acroformPlugin.acroFormDictionaryRoot.Fields.push(o)};var h=function(){if(typeof this.acroformPlugin.acroFormDictionaryRoot!="undefined"){this.internal.write("/AcroForm "+this.acroformPlugin.acroFormDictionaryRoot.objId+" "+0+" R")}else{console.log("Root missing...")}};var j=function(){this.internal.events.unsubscribe(this.acroformPlugin.acroFormDictionaryRoot._eventID);delete this.acroformPlugin.acroFormDictionaryRoot._eventID;this.acroformPlugin.printedOut=true};var d=function(y){var u=(!y);if(!y){this.internal.newObjectDeferredBegin(this.acroformPlugin.acroFormDictionaryRoot.objId);this.internal.out(this.acroformPlugin.acroFormDictionaryRoot.getString())}var y=y||this.acroformPlugin.acroFormDictionaryRoot.Kids;for(var r in y){var x=r;var o=y[r];var v=o.Rect;if(o.Rect){o.Rect=k.internal.calculateCoordinates.call(this,o.Rect)}this.internal.newObjectDeferredBegin(o.objId);var t="";t+=(o.objId+" 0 obj\n");t+=("<<\n"+o.getContent());o.Rect=v;if(o.hasAppearanceStream&&!o.appearanceStreamContent){var s=k.internal.calculateAppearanceStream.call(this,o);t+="/AP << /N "+s+" >>\n";this.acroformPlugin.xForms.push(s)}if(o.appearanceStreamContent){t+="/AP << ";for(var p in o.appearanceStreamContent){var w=o.appearanceStreamContent[p];t+=("/"+p+" ");t+="<< ";if(Object.keys(w).length>=1||Array.isArray(w)){for(var r in w){var q=w[r];if(typeof q==="function"){q=q.call(this,o)}t+=("/"+r+" "+q+" ");if(!(this.acroformPlugin.xForms.indexOf(q)>=0)){this.acroformPlugin.xForms.push(q)}}}else{var q=w;if(typeof q==="function"){q=q.call(this,o)}t+=("/"+r+" "+q+" \n");if(!(this.acroformPlugin.xForms.indexOf(q)>=0)){this.acroformPlugin.xForms.push(q)}}t+=" >>\n"}t+=(">>\n")}t+=(">>\nendobj\n");this.internal.out(t)}if(u){i.call(this,this.acroformPlugin.xForms)}};var i=function(s){for(var p in s){var o=p;var r=s[p];this.internal.newObjectDeferredBegin(r&&r.objId);var q="";q+=r?r.getString():"";this.internal.out(q);delete s[o]}};g.addField=function(o){if(o instanceof k.TextField){c.call(this,o)}else{if(o instanceof k.ChoiceField){e.call(this,o)}else{if(o instanceof k.Button){f.call(this,o)}else{if(o instanceof k.ChildClass){m.call(this,o)}else{if(o){m.call(this,o)}}}}}o.page=this.acroformPlugin.internal.getCurrentPageInfo().pageNumber;return this};var f=function(p){var p=p||new k.Field();p.FT="/Btn";var o=p.Ff||0;if(p.pushbutton){o=k.internal.setBitPosition(o,17);delete p.pushbutton}if(p.radio){o=k.internal.setBitPosition(o,16);delete p.radio}if(p.noToggleToOff){o=k.internal.setBitPosition(o,15)}p.Ff=o;m.call(this,p)};var c=function(p){var p=p||new k.Field();p.FT="/Tx";var o=p.Ff||0;if(p.multiline){o=o|(1<<12)}if(p.password){o=o|(1<<13)}if(p.fileSelect){o=o|(1<<20)}if(p.doNotSpellCheck){o=o|(1<<22)}if(p.doNotScroll){o=o|(1<<23)}p.Ff=p.Ff||o;m.call(this,p)};var e=function(q){var p=q||new k.Field();p.FT="/Ch";var o=p.Ff||0;if(p.combo){o=k.internal.setBitPosition(o,18);delete p.combo}if(p.edit){o=k.internal.setBitPosition(o,19);delete p.edit}if(p.sort){o=k.internal.setBitPosition(o,20);delete p.sort}if(p.multiSelect&&this.internal.getPDFVersion()>=1.4){o=k.internal.setBitPosition(o,22);delete p.multiSelect}if(p.doNotSpellCheck&&this.internal.getPDFVersion()>=1.4){o=k.internal.setBitPosition(o,23);delete p.doNotSpellCheck}p.Ff=o;m.call(this,p)}})(jsPDF.API);var AcroForm=window.AcroForm;AcroForm.internal={};AcroForm.createFormXObject=function(d){var b=new AcroForm.FormXObject;var a=AcroForm.Appearance.internal.getHeight(d)||0;var c=AcroForm.Appearance.internal.getWidth(d)||0;b.BBox=[0,0,c,a];return b};AcroForm.Appearance={CheckBox:{createAppearanceStream:function(){var a={N:{On:AcroForm.Appearance.CheckBox.YesNormal},D:{On:AcroForm.Appearance.CheckBox.YesPushDown,Off:AcroForm.Appearance.CheckBox.OffPushDown}};return a},createMK:function(){return"<< /CA (3)>>"},YesPushDown:function(d){var a=AcroForm.createFormXObject(d);var c="";d.Q=1;var b=AcroForm.internal.calculateX(d,"3","ZapfDingbats",50);c+="0.749023 g\n             0 0 "+AcroForm.Appearance.internal.getWidth(d)+" "+AcroForm.Appearance.internal.getHeight(d)+" re\n             f\n             BMC\n             q\n             0 0 1 rg\n             /F13 "+b.fontSize+" Tf 0 g\n             BT\n";c+=b.text;c+="ET\n             Q\n             EMC\n";a.stream=c;return a},YesNormal:function(d){var a=AcroForm.createFormXObject(d);var c="";d.Q=1;var b=AcroForm.internal.calculateX(d,"3","ZapfDingbats",AcroForm.Appearance.internal.getHeight(d)*0.9);c+="1 g\n0 0 "+AcroForm.Appearance.internal.getWidth(d)+" "+AcroForm.Appearance.internal.getHeight(d)+" re\nf\nq\n0 0 1 rg\n0 0 "+(AcroForm.Appearance.internal.getWidth(d)-1)+" "+(AcroForm.Appearance.internal.getHeight(d)-1)+" re\nW\nn\n0 g\nBT\n/F13 "+b.fontSize+" Tf 0 g\n";c+=b.text;c+="ET\n             Q\n";a.stream=c;return a},OffPushDown:function(c){var a=AcroForm.createFormXObject(c);var b="";b+="0.749023 g\n            0 0 "+AcroForm.Appearance.internal.getWidth(c)+" "+AcroForm.Appearance.internal.getHeight(c)+" re\n            f\n";a.stream=b;return a}},RadioButton:{Circle:{createAppearanceStream:function(a){var b={D:{Off:AcroForm.Appearance.RadioButton.Circle.OffPushDown},N:{}};b.N[a]=AcroForm.Appearance.RadioButton.Circle.YesNormal;b.D[a]=AcroForm.Appearance.RadioButton.Circle.YesPushDown;return b},createMK:function(){return"<< /CA (l)>>"},YesNormal:function(e){var a=AcroForm.createFormXObject(e);var d="";var b=(AcroForm.Appearance.internal.getWidth(e)<=AcroForm.Appearance.internal.getHeight(e))?AcroForm.Appearance.internal.getWidth(e)/4:AcroForm.Appearance.internal.getHeight(e)/4;b*=0.9;var f=AcroForm.Appearance.internal.Bezier_C;d+="q\n1 0 0 1 "+AcroForm.Appearance.internal.getWidth(e)/2+" "+AcroForm.Appearance.internal.getHeight(e)/2+" cm\n"+b+" 0 m\n"+b+" "+b*f+" "+b*f+" "+b+" 0 "+b+" c\n-"+b*f+" "+b+" -"+b+" "+b*f+" -"+b+" 0 c\n-"+b+" -"+b*f+" -"+b*f+" -"+b+" 0 -"+b+" c\n"+b*f+" -"+b+" "+b+" -"+b*f+" "+b+" 0 c\nf\nQ\n";a.stream=d;return a},YesPushDown:function(g){var a=AcroForm.createFormXObject(g);var f="";var e=(AcroForm.Appearance.internal.getWidth(g)<=AcroForm.Appearance.internal.getHeight(g))?AcroForm.Appearance.internal.getWidth(g)/4:AcroForm.Appearance.internal.getHeight(g)/4;e*=0.9;var c=e*2;var d=c*AcroForm.Appearance.internal.Bezier_C;var b=e*AcroForm.Appearance.internal.Bezier_C;f+="0.749023 g\n            q\n           1 0 0 1 "+AcroForm.Appearance.internal.getWidth(g)/2+" "+AcroForm.Appearance.internal.getHeight(g)/2+" cm\n"+c+" 0 m\n"+c+" "+d+" "+d+" "+c+" 0 "+c+" c\n-"+d+" "+c+" -"+c+" "+d+" -"+c+" 0 c\n-"+c+" -"+d+" -"+d+" -"+c+" 0 -"+c+" c\n"+d+" -"+c+" "+c+" -"+d+" "+c+" 0 c\n            f\n            Q\n            0 g\n            q\n            1 0 0 1 "+AcroForm.Appearance.internal.getWidth(g)/2+" "+AcroForm.Appearance.internal.getHeight(g)/2+" cm\n"+e+" 0 m\n"+e+" "+b+" "+b+" "+e+" 0 "+e+" c\n-"+b+" "+e+" -"+e+" "+b+" -"+e+" 0 c\n-"+e+" -"+b+" -"+b+" -"+e+" 0 -"+e+" c\n"+b+" -"+e+" "+e+" -"+b+" "+e+" 0 c\n            f\n            Q\n";a.stream=f;return a},OffPushDown:function(f){var a=AcroForm.createFormXObject(f);var e="";var d=(AcroForm.Appearance.internal.getWidth(f)<=AcroForm.Appearance.internal.getHeight(f))?AcroForm.Appearance.internal.getWidth(f)/4:AcroForm.Appearance.internal.getHeight(f)/4;d*=0.9;var b=d*2;var c=b*AcroForm.Appearance.internal.Bezier_C;e+="0.749023 g\n            q\n 1 0 0 1 "+AcroForm.Appearance.internal.getWidth(f)/2+" "+AcroForm.Appearance.internal.getHeight(f)/2+" cm\n"+b+" 0 m\n"+b+" "+c+" "+c+" "+b+" 0 "+b+" c\n-"+c+" "+b+" -"+b+" "+c+" -"+b+" 0 c\n-"+b+" -"+c+" -"+c+" -"+b+" 0 -"+b+" c\n"+c+" -"+b+" "+b+" -"+c+" "+b+" 0 c\n            f\n            Q\n";a.stream=e;return a},},Cross:{createAppearanceStream:function(a){var b={D:{Off:AcroForm.Appearance.RadioButton.Cross.OffPushDown},N:{}};b.N[a]=AcroForm.Appearance.RadioButton.Cross.YesNormal;b.D[a]=AcroForm.Appearance.RadioButton.Cross.YesPushDown;return b},createMK:function(){return"<< /CA (8)>>"},YesNormal:function(c){var a=AcroForm.createFormXObject(c);var b="";var d=AcroForm.Appearance.internal.calculateCross(c);b+="q\n            1 1 "+(AcroForm.Appearance.internal.getWidth(c)-2)+" "+(AcroForm.Appearance.internal.getHeight(c)-2)+" re\n            W\n            n\n            "+d.x1.x+" "+d.x1.y+" m\n            "+d.x2.x+" "+d.x2.y+" l\n            "+d.x4.x+" "+d.x4.y+" m\n            "+d.x3.x+" "+d.x3.y+" l\n            s\n            Q\n";a.stream=b;return a},YesPushDown:function(c){var a=AcroForm.createFormXObject(c);var d=AcroForm.Appearance.internal.calculateCross(c);var b="";b+="0.749023 g\n            0 0 "+AcroForm.Appearance.internal.getWidth(c)+" "+AcroForm.Appearance.internal.getHeight(c)+" re\n            f\n            q\n            1 1 "+(AcroForm.Appearance.internal.getWidth(c)-2)+" "+(AcroForm.Appearance.internal.getHeight(c)-2)+" re\n            W\n            n\n            "+d.x1.x+" "+d.x1.y+" m\n            "+d.x2.x+" "+d.x2.y+" l\n            "+d.x4.x+" "+d.x4.y+" m\n            "+d.x3.x+" "+d.x3.y+" l\n            s\n            Q\n";a.stream=b;return a},OffPushDown:function(c){var a=AcroForm.createFormXObject(c);var b="";b+="0.749023 g\n            0 0 "+AcroForm.Appearance.internal.getWidth(c)+" "+AcroForm.Appearance.internal.getHeight(c)+" re\n            f\n";a.stream=b;return a}},},createDefaultAppearanceStream:function(b){var a="";a+="/Helv 0 Tf 0 g";return a}};AcroForm.Appearance.internal={Bezier_C:0.551915024494,calculateCross:function(h){var e=function(a,j){return(a>j)?j:a};var f=AcroForm.Appearance.internal.getWidth(h);var c=AcroForm.Appearance.internal.getHeight(h);var d=e(f,c);var b=d;var g=2;var i={x1:{x:(f-d)/2,y:((c-d)/2)+d,},x2:{x:((f-d)/2)+d,y:((c-d)/2)},x3:{x:(f-d)/2,y:((c-d)/2)},x4:{x:((f-d)/2)+d,y:((c-d)/2)+d,}};return i},};AcroForm.Appearance.internal.getWidth=function(a){return a.Rect[2]};AcroForm.Appearance.internal.getHeight=function(a){return a.Rect[3]};AcroForm.internal.inherit=function(c,b){var a=Object.create||function(e){var d=function(){};d.prototype=e;return new d()};c.prototype=Object.create(b.prototype);c.prototype.constructor=c};AcroForm.internal.arrayToPdfArray=function(d){if(Array.isArray(d)){var c=" [";for(var b in d){var a=d[b].toString();c+=a;c+=((b<d.length-1)?" ":"")}c+="]";return c}};AcroForm.internal.toPdfString=function(a){a=a||"";if(a.indexOf("(")!==0){a="("+a}if(a.substring(a.length-1)!=")"){a+="("}return a};AcroForm.PDFObject=function(){var a;Object.defineProperty(this,"objId",{get:function(){if(!a){if(this.internal){a=this.internal.newObjectDeferred()}else{if(jsPDF.API.acroformPlugin.internal){a=jsPDF.API.acroformPlugin.internal.newObjectDeferred()}}}if(!a){console.log("Couldn't create Object ID")}return a},configurable:false})};AcroForm.PDFObject.prototype.toString=function(){return this.objId+" 0 R"};AcroForm.PDFObject.prototype.getString=function(){var a=this.objId+" 0 obj\n<<";var b=this.getContent();a+=b+">>\n";if(this.stream){a+="stream\n";a+=this.stream;a+="endstream\n"}a+="endobj\n";return a};AcroForm.PDFObject.prototype.getContent=function(){var a=function(g){var f="";var e=Object.keys(g).filter(function(i){return(i!="content"&&i!="appearanceStreamContent"&&i.substring(0,1)!="_")});for(var d in e){var c=e[d];var h=g[c];if(h){if(Array.isArray(h)){f+="/"+c+" "+AcroForm.internal.arrayToPdfArray(h)+"\n"}else{if(h instanceof AcroForm.PDFObject){f+="/"+c+" "+h.objId+" 0 R\n"}else{f+="/"+c+" "+h+"\n"}}}}return f};var b="";b+=a(this);return b};AcroForm.FormXObject=function(){AcroForm.PDFObject.call(this);this.Type="/XObject";this.Subtype="/Form";this.FormType=1;this.BBox;this.Matrix;this.Resources="2 0 R";this.PieceInfo;var a;Object.defineProperty(this,"Length",{enumerable:true,get:function(){return(a!==undefined)?a.length:0}});Object.defineProperty(this,"stream",{enumerable:false,set:function(b){a=b},get:function(){if(a){return a}else{return null}}})};AcroForm.internal.inherit(AcroForm.FormXObject,AcroForm.PDFObject);AcroForm.AcroFormDictionary=function(){AcroForm.PDFObject.call(this);var a=[];Object.defineProperty(this,"Kids",{enumerable:false,configurable:true,get:function(){if(a.length>0){return a}else{return}}});Object.defineProperty(this,"Fields",{enumerable:true,configurable:true,get:function(){return a}});this.DA};AcroForm.internal.inherit(AcroForm.AcroFormDictionary,AcroForm.PDFObject);AcroForm.Field=function(){AcroForm.PDFObject.call(this);var a;Object.defineProperty(this,"Rect",{enumerable:true,configurable:false,get:function(){if(!a){return}var f=a;return f},set:function(f){a=f}});var b="";Object.defineProperty(this,"FT",{enumerable:true,set:function(f){b=f},get:function(){return b}});var c;Object.defineProperty(this,"T",{enumerable:true,configurable:false,set:function(f){c=f},get:function(){if(!c||c.length<1){if(this instanceof AcroForm.ChildClass){return}return"(FieldObject"+(AcroForm.Field.FieldNum++)+")"}if(c.substring(0,1)=="("&&c.substring(c.length-1)){return c}return"("+c+")"}});var d;Object.defineProperty(this,"DA",{enumerable:true,get:function(){if(!d){return}return"("+d+")"},set:function(f){d=f}});var e;Object.defineProperty(this,"DV",{enumerable:true,configurable:true,get:function(){if(!e){return}return e},set:function(f){e=f}});Object.defineProperty(this,"Type",{enumerable:true,get:function(){return(this.hasAnnotation)?"/Annot":null}});Object.defineProperty(this,"Subtype",{enumerable:true,get:function(){return(this.hasAnnotation)?"/Widget":null}});this.BG;Object.defineProperty(this,"hasAnnotation",{enumerable:false,get:function(){if(this.Rect||this.BC||this.BG){return true}return false}});Object.defineProperty(this,"hasAppearanceStream",{enumerable:false,configurable:true,writable:true});Object.defineProperty(this,"page",{enumerable:false,configurable:true,writable:true})};AcroForm.Field.FieldNum=0;AcroForm.internal.inherit(AcroForm.Field,AcroForm.PDFObject);AcroForm.ChoiceField=function(){AcroForm.Field.call(this);this.FT="/Ch";this.Opt=[];this.V="()";this.TI=0;this.combo=false;Object.defineProperty(this,"edit",{enumerable:true,set:function(a){if(a==true){this._edit=true;this.combo=true}else{this._edit=false}},get:function(){if(!this._edit){return false}return this._edit},configurable:false});this.hasAppearanceStream=true;Object.defineProperty(this,"V",{get:function(){AcroForm.internal.toPdfString()}})};AcroForm.internal.inherit(AcroForm.ChoiceField,AcroForm.Field);window.ChoiceField=AcroForm.ChoiceField;AcroForm.ListBox=function(){AcroForm.ChoiceField.call(this)};AcroForm.internal.inherit(AcroForm.ListBox,AcroForm.ChoiceField);window.ListBox=AcroForm.ListBox;AcroForm.ComboBox=function(){AcroForm.ListBox.call(this);this.combo=true};AcroForm.internal.inherit(AcroForm.ComboBox,AcroForm.ListBox);window.ComboBox=AcroForm.ComboBox;AcroForm.EditBox=function(){AcroForm.ComboBox.call(this);this.edit=true};AcroForm.internal.inherit(AcroForm.EditBox,AcroForm.ComboBox);window.EditBox=AcroForm.EditBox;AcroForm.Button=function(){AcroForm.Field.call(this);this.FT="/Btn"};AcroForm.internal.inherit(AcroForm.Button,AcroForm.Field);window.Button=AcroForm.Button;AcroForm.PushButton=function(){AcroForm.Button.call(this);this.pushbutton=true};AcroForm.internal.inherit(AcroForm.PushButton,AcroForm.Button);window.PushButton=AcroForm.PushButton;AcroForm.RadioButton=function(){AcroForm.Button.call(this);this.radio=true;var b=[];Object.defineProperty(this,"Kids",{enumerable:true,get:function(){if(b.length>0){return b}}});Object.defineProperty(this,"__Kids",{get:function(){return b}});var a;Object.defineProperty(this,"noToggleToOff",{enumerable:false,get:function(){return a},set:function(c){a=c}})};AcroForm.internal.inherit(AcroForm.RadioButton,AcroForm.Button);window.RadioButton=AcroForm.RadioButton;AcroForm.ChildClass=function(b,a){AcroForm.Field.call(this);this.Parent=b;this._AppearanceType=AcroForm.Appearance.RadioButton.Circle;this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(a);this.F=AcroForm.internal.setBitPosition(this.F,3,1);this.MK=this._AppearanceType.createMK();this.AS="/Off";this._Name=a};AcroForm.internal.inherit(AcroForm.ChildClass,AcroForm.Field);AcroForm.RadioButton.prototype.setAppearance=function(a){if(!("createAppearanceStream" in a&&"createMK" in a)){console.log("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");return}for(var b in this.__Kids){var c=this.__Kids[b];c.appearanceStreamContent=a.createAppearanceStream(c._Name);c.MK=a.createMK()}};AcroForm.RadioButton.prototype.createOption=function(a){var c=this;var b=this.__Kids.length;var d=new AcroForm.ChildClass(c,a);this.__Kids.push(d);jsPDF.API.addField(d);return d};AcroForm.CheckBox=function(){Button.call(this);this.appearanceStreamContent=AcroForm.Appearance.CheckBox.createAppearanceStream();this.MK=AcroForm.Appearance.CheckBox.createMK();this.AS="/On";this.V="/On"};AcroForm.internal.inherit(AcroForm.CheckBox,AcroForm.Button);window.CheckBox=AcroForm.CheckBox;AcroForm.TextField=function(){AcroForm.Field.call(this);this.DA=AcroForm.Appearance.createDefaultAppearanceStream();this.F=4;var c;Object.defineProperty(this,"V",{get:function(){if(c){return"("+c+")"}else{return c}},enumerable:true,set:function(e){c=e}});var d;Object.defineProperty(this,"DV",{get:function(){if(d){return"("+d+")"}else{return d}},enumerable:true,set:function(e){d=e}});var a=false;Object.defineProperty(this,"multiline",{enumerable:false,get:function(){return a},set:function(e){a=e}});var b=false;Object.defineProperty(this,"MaxLen",{enumerable:true,get:function(){return b},set:function(e){b=e}});Object.defineProperty(this,"hasAppearanceStream",{enumerable:false,get:function(){return(this.V||this.DV)}})};AcroForm.internal.inherit(AcroForm.TextField,AcroForm.Field);window.TextField=AcroForm.TextField;AcroForm.PasswordField=function(){TextField.call(this);Object.defineProperty(this,"password",{value:true,enumerable:false,configurable:false,writable:false})};AcroForm.internal.inherit(AcroForm.PasswordField,AcroForm.TextField);window.PasswordField=AcroForm.PasswordField;AcroForm.internal.calculateFontSpace=function(g,h,b){var b=b||"helvetica";var c=AcroForm.internal.calculateFontSpace.canvas||(AcroForm.internal.calculateFontSpace.canvas=document.createElement("canvas"));var e=c.getContext("2d");e.save();var a=(h+" "+b);e.font=a;var d=e.measureText(g);e.fontcolor="black";var e=c.getContext("2d");d.height=e.measureText("3").width*1.5;e.restore();var f=d.width;return d};AcroForm.internal.calculateX=function(m,p,q,o){var o=o||12;var q=q||"helvetica";var F={text:"",fontSize:""};p=(p.substr(0,1)=="(")?p.substr(1):p;p=(p.substr(p.length-1)==")")?p.substr(0,p.length-1):p;var e=p.split(" ");var z="0 g\n";var d=o;var E=2;var B=2;var s=AcroForm.Appearance.internal.getHeight(m)||0;s=(s<0)?-s:s;var u=AcroForm.Appearance.internal.getWidth(m)||0;u=(u<0)?-u:u;var k=function(I,y,J){if(I+1<e.length){var H=y+" "+e[I+1];var K=((AcroForm.internal.calculateFontSpace(H,J+"px",q).width));var x=(u-2*B);return(K<=x)}else{return false}};d++;FontSize:while(true){var p="";d--;var a=AcroForm.internal.calculateFontSpace("3",d+"px",q).height;var C=(m.multiline)?s-d:(s-a)/2;C+=E;var D=-B;var g=D,f=C;var c=0,t=0;var j=0;var h=0;if(d==0){d=12;p="(...) Tj\n";p+="% Width of Text: "+AcroForm.internal.calculateFontSpace(p,"1px").width+", FieldWidth:"+u+"\n";break}j=AcroForm.internal.calculateFontSpace(e[0]+" ",d+"px",q).width;var b="";var v=0;Line:for(var A in e){b+=e[A]+" ";b=(b.substr(b.length-1)==" ")?b.substr(0,b.length-1):b;var G=parseInt(A);j=AcroForm.internal.calculateFontSpace(b+" ",d+"px",q).width;var r=k(G,b,d);var w=A>=e.length-1;if(r&&!w){b+=" ";continue}else{if(!r&&!w){if(!m.multiline){continue FontSize}else{if(((a+E)*(v+2)+E)>s){continue FontSize}t=G}}else{if(w){t=G}else{if(m.multiline&&((a+E)*(v+2)+E)>s){continue FontSize}}}}var n="";for(var l=c;l<=t;l++){n+=e[l]+" "}n=(n.substr(n.length-1)==" ")?n.substr(0,n.length-1):n;j=AcroForm.internal.calculateFontSpace(n,d+"px",q).width;switch(m.Q){case 2:D=(u-j-B);break;case 1:D=(u-j)/2;break;case 0:default:D=B;break}p+=(D)+" "+(f)+" Td\n";p+="("+n+") Tj\n";p+=(-D)+" 0 Td\n";f=-(d+E);g=D;j=0;c=t+1;v++;b="";continue Line}break}F.text=p;F.fontSize=d;return F};AcroForm.internal.calculateAppearanceStream=function(f){if(f.appearanceStreamContent){return f.appearanceStreamContent}if(!f.V&&!f.DV){return}var e="";var d=f.V||f.DV;var c=AcroForm.internal.calculateX(f,d);e+="/Tx BMC\nq\n/F1 "+c.fontSize+" Tf\n1 0 0 1 0 0 Tm\n";e+="BT\n";e+=c.text;e+="ET\n";e+="Q\nEMC\n";var b=new AcroForm.createFormXObject(f);b.stream=e;var a={N:{Normal:b}};return b};AcroForm.internal.calculateCoordinates=function(a,f,c,d){var e={};if(this.internal){function b(g){return(g*this.internal.scaleFactor)}if(Array.isArray(a)){a[0]=AcroForm.scale(a[0]);a[1]=AcroForm.scale(a[1]);a[2]=AcroForm.scale(a[2]);a[3]=AcroForm.scale(a[3]);e.lowerLeft_X=a[0]||0;e.lowerLeft_Y=(b.call(this,this.internal.pageSize.height)-a[3]-a[1])||0;e.upperRight_X=a[0]+a[2]||0;e.upperRight_Y=(b.call(this,this.internal.pageSize.height)-a[1])||0}else{a=AcroForm.scale(a);f=AcroForm.scale(f);c=AcroForm.scale(c);d=AcroForm.scale(d);e.lowerLeft_X=a||0;e.lowerLeft_Y=this.internal.pageSize.height-f||0;e.upperRight_X=a+c||0;e.upperRight_Y=this.internal.pageSize.height-f+d||0}}else{if(Array.isArray(a)){e.lowerLeft_X=a[0]||0;e.lowerLeft_Y=a[1]||0;e.upperRight_X=a[0]+a[2]||0;e.upperRight_Y=a[1]+a[3]||0}else{e.lowerLeft_X=a||0;e.lowerLeft_Y=f||0;e.upperRight_X=a+c||0;e.upperRight_Y=f+d||0}}return[e.lowerLeft_X,e.lowerLeft_Y,e.upperRight_X,e.upperRight_Y]};AcroForm.internal.calculateColor=function(e,d,a){var c=new Array(3);c.r=e|0;c.g=d|0;c.b=a|0;return c};AcroForm.internal.getBitPosition=function(b,a){b=b||0;var c=1;c=c<<(a-1);return b|c};AcroForm.internal.setBitPosition=function(b,a,c){b=b||0;c=c||1;var d=1;d=d<<(a-1);if(c==1){var b=b|d}else{var b=b&(~d)}return b};